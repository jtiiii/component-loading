let Loading=function({el:el}){this.el=el;this.$dom().addClass("loading");this.playing=false;this.playStack=[]};Loading.setJQuery=($=>Loading.$=$);Loading.prototype={constructor:Loading,show:function(){let play=next=>{this.$dom().addClass("loading-begin");setTimeout(()=>{console.info("show");this.$dom().removeClass("loading-begin");this.$dom().addClass("loading-run");next()},300)};this.playStack.push(play);setTimeout(this._play(),10)},hide:function(){let play=next=>{this.$dom().removeClass("loading-run");this.$dom().addClass("loading-end");this.loading=false;setTimeout(()=>{console.info("hide");this.$dom().removeClass("loading-end");next()},300)};this.playStack.push(play);setTimeout(this._play(),10)},$dom:function(){return Loading.$(this.el)},_play:function(){if(this.playing){return}this.playing=true;this._executeStack().then(()=>{this.playing=false})},_executeStack:function(){let next=this.playStack.shift();return new Promise(next).then(()=>{if(this.playStack.length!==0){return this._executeStack()}})}};module.exports=Loading;
